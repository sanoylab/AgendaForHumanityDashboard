

<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Agenda for Humanity Viz | Dashboard</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="vendor/Ionicons/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/AdminLTE.min.css">
  <link rel="shortcut icon" href="img/favicon.png" type="image/vnd.microsoft.icon" />

  <link rel="stylesheet" href="css/skins/skin-blue.min.css">
  <link rel="stylesheet" href="css/c3.css">
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <!-- Google Font -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <style>
        @import url("http://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
        @import url("http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css");

    #chart-stakeholder-2018,#chart-stakeholder-2018,#chart-stakeholder-region-2019,#chart-stakeholder-2019,#chart-stakeholder-region-2018, #chart-transformation, #chart_challenges-2019, #chart-challenge-2018{
  cursor: pointer;
}
.bg-yellow
 {
  background-color: #51AF32 !important;
  color: #fff;
}

.bg-green {
  background-color: #E84E0F !important;
  color: #fff;
}

.bg-red {
  background-color: #00B1EB !important;
  color: #fff;
}

 /* Up and Down Arrows */
 .sortable th.descend:after {
            content: "\25B2";
        }

        .sortable th.ascend:after {
            content: "\25BC";
        }


        .big-font{
  font-size: 2vw;
  padding-top: 5px;
    font-weight: bold;
    color: #286BCE !important;
    font-family: 'Roboto', sans-serif;
}
.small-font{
  font-family: 'Roboto', sans-serif;
    font-size: 1vw;
}
.small-fontlast{
  font-family: 'Roboto', sans-serif;
    font-size: 1vw;
    padding-bottom: 10px;
}

th[role=columnheader]:not(.no-sort) {
	cursor: pointer;
}

th[role=columnheader]:not(.no-sort):after {
	content: '';
	float: right;
	margin-top: 7px;
	border-width: 0 4px 4px;
	border-style: solid;
	border-color: #404040 transparent;
	visibility: hidden;
	opacity: 0;
	-ms-user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	user-select: none;
}

th[aria-sort=ascending]:not(.no-sort):after {
	border-bottom: none;
	border-width: 4px 4px 0;
}

th[aria-sort]:not(.no-sort):after {
	visibility: visible;
	opacity: 0.4;
}

th[role=columnheader]:not(.no-sort):hover:after {
	visibility: visible;
	opacity: 1;
}
    </style>
</head>


<body class="hold-transition skin-blue sidebar-mini">
  <div class="wrapper">

    <!-- Main Header -->
    <header class="main-header">

      <!-- Logo -->
      <a href="index2.html" class="logo">
        <!-- mini logo for sidebar mini 50x50 pixels -->
        <span class="logo-mini"><b>V</b>IZ</span>
        <!-- logo for regular state and mobile devices -->
        <span class="logo-lg"><b>Dashboard VIZ</b></span>
      </a>

      <!-- Header Navbar -->
      <nav class="navbar navbar-static-top" role="navigation">
        <!-- Sidebar toggle button-->
        <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
          <span class="sr-only">Toggle navigation</span>
        </a>
        <!-- Navbar Right Menu -->
        <div class="navbar-custom-menu">
          <ul class="nav navbar-nav">
            <!-- Messages: style can be found in dropdown.less-->
            <li class="dropdown messages-menu">
              <!-- Menu toggle button -->


              <!-- /.messages-menu -->

              <!-- Notifications Menu -->

              <!-- Tasks Menu -->

              <!-- User Account Menu -->
            <li class="dropdown user user-menu">
              <!-- Menu Toggle Button -->
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <!-- The user image in the navbar-->

                <!-- hidden-xs hides the username on small devices so only the image appears. -->
                <span class="hidden-xs">Welcome to Agenda for Humanitarian Data Visualization Dashboard</span>
              </a>

            </li>
            <!-- Control Sidebar Toggle Button -->

          </ul>
        </div>
      </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar">

      <!-- sidebar: style can be found in sidebar.less -->
      <section class="sidebar">

        <!-- Sidebar user panel (optional) -->
        <div class="user-panel">
          <div class="pull-left image">

          </div>

        </div>

        <!-- search form (Optional) -->

        <!-- /.search form -->

        <!-- Sidebar Menu -->
        <ul class="sidebar-menu" data-widget="tree">
          <li class="header">MAIN NAVIGATION</li>
          <!-- Optionally, you can add icons to the links -->
          <li class="active"><a href="index.html"><i class="fas fa-tv"></i> &nbsp;<span>Dashboard</span></a></li>
          <li><a href="transformation.html"><i class="fas fa-laptop"></i> <span>Transformation</span></a></li>
          <li><a href="stakeholder.html"><i class="fas fa-user-friends"></i> &nbsp; <span>Stakeholders</span></a></li>
          <li><a href="challenges.html"><i class="fas fa-desktop"></i> &nbsp; <span>Challenges</span></a></li>
          <li><a href="ranu/Tree_viz.html" target="_blank"><i class="fas fa-desktop"></i> &nbsp; <span>Subcategory - Tree Viz</span></a></li>
          <li><a href="ranu/treemap.html" target="_blank"><i class="fas fa-desktop"></i> &nbsp; <span>Subcategory - Tree map</span></a></li>
         
         
        </ul>  
       
        <table style="margin-top: 50px; color: #fff;" class="table table-condesed">
          <tr><td>1A - Demonstrate timely, coherent and decisive political leadership	</td></tr>
          <tr><td>1B - Act early	</td></tr>
          <tr><td>1C - Remain engaged and invest in stability	</td></tr>
          <tr><td>1D - Develop solutions with and for people	</td></tr>
          <tr><td>2A - Respect and protect civilians and civilian objects in the conduct of hostilities	</td></tr>
          <tr><td>2B - Ensure full access to and protection of the humanitarian and medical missions	</td></tr>
          <tr><td>2C - Speak out on violations	</td></tr>
          <tr><td>2D - Take concrete steps to improve compliance and accountability	</td></tr>
          <tr><td>2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity	</td></tr>
          <tr><td>3A - Reduce and address displacement	</td></tr>
          <tr><td>3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration	</td></tr>
          <tr><td>3C - End statelessness in the next decade	</td></tr>
          <tr><td>3D - Empower and protect women and girls	</td></tr>
          <tr><td>3E - Eliminate gaps in education for children, adolescents and young people	</td></tr>
          <tr><td>3F - Enable adolescents and young people to be agents of positive transformation	</td></tr>
          <tr><td>3G - Address other groups or minorities in crisis settings	</td></tr>
          <tr><td>4A - Reinforce, do not replace, national and local systems	</td></tr>
          <tr><td>4B - Anticipate, do not wait, for crises	</td></tr>
          <tr><td>4C - Deliver collective outcomes: transcend humanitarian-development divides	</td></tr>
          <tr><td>5A - Invest in local capacities	</td></tr>
          <tr><td>5B - Invest according to risk	</td></tr>
          <tr><td>5C - Invest in stability	</td></tr>
          <tr><td>5D - Finance outcomes, not fragmentation: shift from funding to financing	</td></tr>
          <tr><td>5E - Diversify the resource base and increase cost-efficiency	</td></tr>
        </table>     
      </section>     
    </aside>

    
    <div class="content-wrapper">     
      <section class="content-header">
        <h1>
          Agenda for Humanity Data Visualization Dashboard
         
        </h1>
    
      </section>
      
      <section class="content container-fluid">
          <div class="row">
              <!-- Left col -->
              <div class="col-md-8">
                <!-- MAP & BOX PANE -->
                <div class="box box-success">
                  <div class="box-header with-border">
                    <h3 class="box-title">Reports</h3>     
                   
                  </div>
                
                  <div class="box-body no-padding">
                    <div class="row">
                      <div class="col-md-12 col-sm-12">
                        <div class="pad">
                          <div class="col-md-4">
                            <div id="charts_reported_2016" ></div>
                        </div>
                        <div class="col-md-4">
                            <div id="charts_reported_2017"></div>
                        </div>
                        <div class="col-md-4">
                            <div id="charts_reported_2018"></div>
                        </div>
                            
                        
                         
                         
                        </div>
                      </div>
                     
                    </div>
                  
                  </div>                 
                </div>               
              </div>             
      
              <div class="col-md-4 col-sm-12">

                <!-- /.info-box -->

                <!-- /.info-box-content -->

                

                 <!-- /.info-box -->
                 <div class="info-box bg-red"  style="border-top-right-radius: 20px;">
                        <span class="info-box-icon"><i class="fas fa-chart-pie"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">2017 Total Reported</span>
                            <span class="info-box-number"><span
                                    id="total-stackholder-2016"></span></span>

                            <div class="progress">
                                <div class="progress-bar" style="width: 40%"></div>
                            </div>

                        </div>
                    </div>
                <!-- Info Boxes Style 2 -->
                <div class="info-box bg-yellow">
                    <span class="info-box-icon"><i class="fas fa-chart-pie"></i></span>

                    <div class="info-box-content">
                        <span class="info-box-text">2018 Total Reported</span>
                        <span class="info-box-number"><span
                                id="total-stakeholder-2017"></span></span>

                        <div class="progress">
                            <div class="progress-bar" style="width: 42%"></div>
                        </div>

                    </div>
                    <!-- /.info-box-content -->
                </div>
                <div class="info-box bg-green" style="border-bottom-right-radius: 20px;">
                        <span class="info-box-icon"><i class="fas fa-chart-pie"></i></span>

                        <div class="info-box-content">
                            <span class="info-box-text">2019 Total Reported</span>
                            <span class="info-box-number"><span
                                    id="total-stakeholder-2018"></span></span>

                            <div class="progress">
                                <div class="progress-bar" style="width: 32%"></div>
                            </div>

                        </div>
                        <!-- /.info-box-content -->


                    </div>


            </div>
             
            </div>
            <div class="row"><h3>&nbsp;&nbsp;&nbsp;Transformation</h2></div>
          <div class="row">
              <div class="col-md-12">
                <div class="box box-warning">
                  <div class="box-header with-border">
                    <h3 class="box-title"></h3>
                  </div>
                  <div class="box-body no-padding" style="padding-left: 20px;padding-right: 20px;">
                    <div id="chart-transformation-bar"></div>
                    <div class="alert alert-success" role="alert">In 2019, subcategories were refined for 4B and 4C. 3D had new subcategories added for reporting.</div>
                  </div>
                </div>
              </div>
             
            </div>
            <div class="row"><h3>&nbsp;&nbsp;&nbsp;Stakeholder - By Type of Organisation</h2></div>
              <div class="row">
                <div class="col-md-12">
                  <div class="box box-warning">
                    <div class="box-header with-border">
                      <h3 class="box-title"></h3>
                    </div>
                    <div class="box-body no-padding">
                        <div id="chart-stakeholder"></div>
                        <div class="alert alert-success" role="alert">In 2019, after identifying a misalignment between region of location and operation, the regions Asia-Pacific, Central and South Asia were merged into a single region 'Asia' and the region 'Pacific' was added. </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--
        <div class="row">
          <div class="col-md-4">
            <div class="box box-warning">
              <div class="box-header with-border">
                <h3 class="box-title">2019</h3>
              </div>
              <div class="box-body no-padding">
                  <div id="chart-stakeholder-2019"></div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="box box-warning">
              <div class="box-header with-border">
                <h3 class="box-title">2018</h3>
              </div>
              <div class="box-body no-padding">
                  <div id="chart-stakeholder-2018"></div>
              </div>
            </div>
          </div>
            <div class="col-md-4">
                <div class="box box-warning">
                  <div class="box-header with-border">
                    <h3 class="box-title">2017</h3>
                  </div>
                  <div class="box-body no-padding">
                      <div id="chart-stakeholder-2017"></div>
                  </div>
                </div>
          </div>
        </div>
      -->
        <div class="row"><h3>&nbsp;&nbsp;&nbsp;Stakeholder - By Region of Operation</h2></div>
        <div class="row">
            <div class="col-md-12">
              <div class="box box-warning">
                <div class="box-header with-border">
                  <h3 class="box-title"></h3>
                </div>
                <div class="box-body no-padding"  style="padding-left: 20px; padding-right: 20px;">
                  <!--<div id="chart-stakeholder-region-2019"></div>-->
                  <div id="chart-stakeholder-region"></div>

                </div>
              </div>
            </div>
            
            
          </div>
          <div class="row"><h3>&nbsp;&nbsp;&nbsp;Challenges</h2></div>
          <div class="row">
              <div class="col-md-12">
                <div class="box box-warning">
                  <div class="box-header with-border">
                    <h3 class="box-title"></h3>
                  </div>
                  <div class="box-body" style="padding-left: 20px; padding-right: 20px;">
                   <!-- <div id="chart_challenges-2019"></div>-->
                    <div id="chart-challenge"></div>
                  </div>
                </div>
              </div>
              <!--
              <div class="col-md-6">
                <div class="box box-danger">
                  <div class="box-header with-border"  style="padding-left: 20px; padding-right: 20px;">
                    <h3 class="box-title">2018</h3>
                  </div>
                  <div class="box-body no-padding"  style="padding-left: 20px; padding-right: 20px;">
                    <div id="chart_challenges-2018"></div>
                  </div>
                </div>
              </div>
            -->
            </div>
            <div class="row"><h3>&nbsp;&nbsp;&nbsp;Cross Cutting Issues</h2></div>
          <div class="row">
              <div class="col-md-4">
                <div class="box box-warning">
                  <div class="box-header with-border">
                    <h3 class="box-title">2019</h3>
                  </div>
                  <div class="box-body no-padding">
                      <div id="table-cci-table-2019"></div>     
                      <div class="alert alert-success" role="alert">The percentage represents the proportion of reporting or stakeholders from the absolute total for that particular year. The arrow represents the percentage increase or decrease compared to the previous year</div>               
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="box box-danger">
                  <div class="box-header with-border">
                    <h3 class="box-title">2018</h3>
                  </div>
                  <div class="box-body no-padding">
                      <div id="table-cci-table-2018"></div>    
                      <div class="alert alert-success" role="alert">The percentage represents the proportion of reporting or stakeholders from the absolute total for that particular year. The arrow represents the percentage increase or decrease compared to the previous year</div>                       
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                  <div class="box box-danger">
                    <div class="box-header with-border">
                      <h3 class="box-title">2017</h3>
                    </div>
                    <div class="box-body no-padding">
                        <div id="table-cci-table-2017"></div>      
                        <div class="alert alert-success" role="alert">The percentage represents the proportion of reporting or stakeholders from the absolute total for that particular year. The arrow represents the percentage increase or decrease compared to the previous year</div>                     
                    </div>
                  </div>
                </div>
            </div>
          
      </section>    
    </div>
    
    <footer class="main-footer">
      <!-- To the right -->
      <div class="pull-right hidden-xs">
        
      </div>
      <!-- Default to the left -->
      <strong>Copyright &copy; 2019. Agenda For Humanity.</strong> All rights reserved.
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
      <!-- Create the tabs -->
      <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
        <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
        <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
      </ul>
      <!-- Tab panes -->
      <div class="tab-content">
        <!-- Home tab content -->
        <div class="tab-pane active" id="control-sidebar-home-tab">
          <h3 class="control-sidebar-heading">Recent Activity</h3>
          <ul class="control-sidebar-menu">
            <li>
              <a href="javascript:;">
                <i class="menu-icon fa fa-birthday-cake bg-red"></i>

                <div class="menu-info">
                  <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

                  <p>Will be 23 on April 24th</p>
                </div>
              </a>
            </li>
          </ul>
          <!-- /.control-sidebar-menu -->

          <h3 class="control-sidebar-heading">Tasks Progress</h3>
          <ul class="control-sidebar-menu">
            <li>
              <a href="javascript:;">
                <h4 class="control-sidebar-subheading">
                  Custom Template Design
                  <span class="pull-right-container">
                    <span class="label label-danger pull-right">70%</span>
                  </span>
                </h4>

                <div class="progress progress-xxs">
                  <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                </div>
              </a>
            </li>
          </ul>
          <!-- /.control-sidebar-menu -->

        </div>
        <!-- /.tab-pane -->
        <!-- Stats tab content -->
        <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
        <!-- /.tab-pane -->
        <!-- Settings tab content -->
        <div class="tab-pane" id="control-sidebar-settings-tab">
          <form method="post">
            <h3 class="control-sidebar-heading">General Settings</h3>

            <div class="form-group">
              <label class="control-sidebar-subheading">
                Report panel usage
                <input type="checkbox" class="pull-right" checked>
              </label>

              <p>
                Some information about this general settings option
              </p>
            </div>
            <!-- /.form-group -->
          </form>
        </div>
        <!-- /.tab-pane -->
      </div>
    </aside>
    <!-- /.control-sidebar -->
    <!-- Add the sidebar's background. This div must be placed
  immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED JS SCRIPTS -->

  <!-- jQuery 3 -->
  <script src="vendor/jquery/dist/jquery.min.js"></script>
  <!-- Bootstrap 3.3.7 -->
  <script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
  <!-- AdminLTE App -->
  <script src="js/adminlte.min.js"></script>
  <script src="js/spin.js"></script>
  <script src="js/d3.min.js"></script>
  <script src="js/c3.min.js"></script>

  <script>
    PopulateTransformation();
    PopulateStokeHolder2018(2017);
    PopulateStokeHolder2017(2016);
    PopulateStokeHolder2019(2018);
    PopulateStokeHolder();
    PopulateStokeHolderRegion();
    PopulateStokeHolderRegion2017(2016);
    PopulateStokeHolderRegion2018(2017);
    PopulateStokeHolderRegion2019(2018);
    PopulateChallenge2018(2017);
    PopulateChallenge2019(2018);
    PopulateChallenges();
    PopulateCrossCuttingIssueTable2019(2018);
    PopulateCrossCuttingIssueTable2018(2017);
    PopulateCrossCuttingIssueTable2017(2016);
    PopulateStackholderTotal2017(2016);
    PopulateStackholderTotal2019(2018);
    PopulateStackholderTotal2018(2017);
    PopulateReportStatusDashboard2016(2016, "charts_reported_2016");
        PopulateReportStatusDashboard2017(2017, "charts_reported_2017");
        PopulateReportStatusDashboard2018(2018, "charts_reported_2018");
    function filterJSON(json, key) {

var result = [];
if (key)
    result = json.filter(function (item) {
        return item.Transformation_Short == key
    });

return result;
}
    var opts = {
            lines: 9, // The number of lines to draw
            length: 9, // The length of each line
            width: 5, // The line thickness
            radius: 14, // The radius of the inner circle
            color: '#002840', // #rgb or #rrggbb or array of colors
            speed: 1.9, // Rounds per second
            trail: 40, // Afterglow percentage
            className: 'spinner', // The CSS class to assign to the spinner
        };
        function PopulateTransformation(year) {
          var target = document.getElementById('chart-transformation-bar');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                spinner.stop();
                var a1 = ['1A'];
                var transformation_short = ['Transformation_Short'];
                var total = ['Total'];
                var transformation_long = ['Transformation_Long'];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[2].push(element['Total']);
                    }

                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3F') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3G') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[2].push(element['Total']);
                    }

                });

                var categoriesList = ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A', '3B',
                    '3C', '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
                ];

                transforms = c3.generate({
                    bindto: '#chart-transformation-bar',
                    data: {

                        columns: countsData,
                        labels: true,
                        type: 'bar',
                        padding: {
                            left: 60,
                            bottom: 40
                        },


                    },
                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                        y: {
                            show: false
                        }
                    },
                    padding: {
                               
                                bottom: 40
                            },
                    tooltip: {
                        format: {
                            title: function (d) {
                                if (d === 0) {
                                    return '1A - Demonstrate timely, coherent and decisive political leadership';
                                } else if (d === 1) {
                                    return '1B - Act early';
                                } else if (d === 2) {
                                    return '1C - Remain engaged and invest in stability';

                                } else if (d === 3) {
                                    return '1D - Develop solutions with and for people';

                                } else if (d === 4) {

                                    return '2A - Respect and protect civilians and civilian objects in the conduct of hostilities';
                                } else if (d === 5) {
                                    return '2B - Ensure full access to and protection of the humanitarian and medical missions';

                                } else if (d === 6) {
                                    return '2C - Speak out on violations';

                                } else if (d === 7) {
                                    return '2D - Take concrete steps to improve compliance and accountability';

                                } else if (d === 8) {
                                    return '2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity';

                                } else if (d === 9) {
                                    return '3A - Reduce and address displacement';

                                } else if (d === 10) {
                                    return '3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration';

                                } else if (d === 11) {
                                    return '3C - End statelessness in the next decade';

                                } else if (d === 12) {
                                    return '3D - Empower and protect women and girls';

                                } else if (d === 13) {
                                    return '3E - Eliminate gaps in education for children, adolescents and young people';

                                } else if (d === 14) {
                                    return '3F - Enable adolescents and young people to be agents of positive transformation';

                                } else if (d === 15) {
                                    return '3G - Address other groups or minorities in crisis settings';

                                } else if (d === 16) {
                                    return '4A - Reinforce, do not replace, national and local systems';

                                } else if (d === 17) {
                                    return '4B - Anticipate, do not wait, for crises';

                                } else if (d === 18) {
                                    return '4C - Deliver collective outcomes: transcend humanitarian-development divides';

                                } else if (d === 19) {
                                    return '5A - Invest in local capacities';

                                } else if (d === 20) {
                                    return '5B - Invest according to risk';

                                } else if (d === 21) {
                                    return '5C - Invest in stability';

                                } else if (d === 22) {
                                    return '5D - Finance outcomes, not fragmentation: shift from funding to financing';

                                } else if (d === 23) {
                                    return '5E - Diversify the resource base and increase cost-efficiency';
                                }





                            },

                            //value: d3.format(',') // apply this format to both y and y2
                        }
                    }
                });
                d3.select(".c3-legend-item .c3-legend-item-2017 .c3-legend-item-2018 .c3-legend-item-2019"). style("float", "right").attr("transform", "translate(0,7)");



            });


        }

        function PopulateStokeHolder2018(year) {
          var target = document.getElementById('chart-stakeholder');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (
                crises) {
                spinner.stop();
                var stakeHolders = ['Stakeholder'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[0].push(element['Total']);
                        
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'Other') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'UN') {
                        countsData[0].push(element['Total']);
                    }



                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'Other') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'UN') {
                        countsData[1].push(element['Total']);
                    }




                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[2].push(element['Total']);
                        countsData[2].push(0);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'Other') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[2].push(element['Total']);
                        countsData[2].push(0);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'UN') {
                        countsData[2].push(element['Total']);
                    }





                });

                var categoriesList = ['Academia', 'Faith-based Organisation', 'Foundation',
                    'International Organisation', 'Member State', 'NGO - International',
                    'NGO - National', 'Other', 'Private Sector', 'Regional Organisation', 'UN'
                ];

                $("#chart-stakeholder").fadeIn(1000);
                stakholder = c3.generate({
                    bindto: '#chart-stakeholder',
                    data: {

                        type: 'bar',
                        columns: countsData,
                        labels: true,
                    },
                    legend: {
                        show: true
                    },
                    types: {
                        data: 'bar'
                    },


                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                    },
                    size: {
                        height: 350
                    },
                    padding: {
                        left: 100,
                        right: 10
                    }
                });


            });
        }  

     
        function PopulateStokeHolder2018(year) {
            var target = document.getElementById('chart-stakeholder');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-2018").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-2018',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#00A65A"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-2018").fadeOut(1000);

                }

            });
        }  
        

        function PopulateStokeHolder2017(year) {
            var target = document.getElementById('chart-stakeholder');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-2017").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-2017',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#00A65A"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-2017").fadeOut(1000);

                }

            });
        }  

        function PopulateStokeHolder() {
          
          var target = document.getElementById('chart-stakeholder');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (
                crises) {
                spinner.stop();
                var stakeHolders = ['Stakeholder'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'Other') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[0].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Stakeholder'] == 'UN') {
                        countsData[0].push(element['Total']);
                    }



                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'Other') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[1].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2017' && element['Stakeholder'] == 'UN') {
                        countsData[1].push(element['Total']);
                    }




                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Academia') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Faith-based Organisation') {
                        countsData[2].push(element['Total']);
                        countsData[2].push(0);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Foundation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'International Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Member State') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - International') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'NGO - National') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'Other') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Private Sector') {
                        countsData[2].push(element['Total']); 
                        countsData[2].push(0);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] ==
                        'Regional Organisation') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2018' && element['Stakeholder'] == 'UN') {
                        countsData[2].push(element['Total']);
                    }





                });

                var categoriesList = ['Academia', 'Faith-based Organisation', 'Foundation',
                    'International Organisation', 'Member State', 'NGO - International',
                    'NGO - National', 'Other', 'Private Sector', 'Regional Organisation', 'UN'
                ];

                $("#chart-stakeholder").fadeIn(1000);
                stakholder = c3.generate({
                    bindto: '#chart-stakeholder',
                    data: {

                        type: 'bar',
                        columns: countsData,
                        labels: true,
                    },
                    legend: {
                        show: true
                    },
                    types: {
                        data: 'bar'
                    },


                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                    },
                    size: {
                        height: 350
                    },
                    padding: {
                        left: 100,
                        right: 10
                    }
                });


            });
        } 
        function PopulateChallenges() {
            var target = document.getElementById('chart-challenge');
            var spinner = new Spinner(opts).spin(target);           
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();
               

                    var countsData = [  ['2018'], ['2019']];

                crises.forEach(function (element, index) {
             /*     if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Buy-in'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Coordination'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Data'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Field or access'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Funding'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Funding modalities'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Gender'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Hum-dev nexus'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Human resources'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='IHL'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Info-management '){
                    countsData[0].push(element['Total']);
                  } 

                  if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Internal constraints'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='National or local systems'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Other'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Preparedness'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2016' && element['ChallengesShortCode']=='Standards'){
                    countsData[0].push(element['Total']);
                  } 
                
*/


                 

                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Buy-in'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Coordination'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Data'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Field or access'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Funding'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Funding modalities'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Gender'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Hum-dev nexus'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Human resources'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='IHL'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Info-management'){
                    countsData[0].push(element['Total']);
                  } 

                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Internal constraints'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='National or local systems'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Other'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Preparedness'){
                    countsData[0].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2017' && element['ChallengesShortCode']=='Standards'){
                    countsData[0].push(element['Total']);
                  }
                 



                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Buy-in'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Coordination'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Data'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Field or access'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Funding'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Funding modalities'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Gender'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Hum-dev nexus'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Human resources'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='IHL'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Info-management'){
                    countsData[1].push(element['Total']);
                  } 

                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Internal constraints'){
                    countsData[1].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='National or local systems'){
                    countsData[1].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Other'){
                    countsData[1].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Preparedness'){
                    countsData[1].push(element['Total']);
                  } 
                  if(element['ReportingYear']=='2018' && element['ChallengesShortCode']=='Standards'){
                    countsData[1].push(element['Total']);
                  }


                });              
                
                  var categoriesList = ['Buy-in', 'Coordination', 'Data','Field or access','Funding','Funding modalities','Gender','Hum-dev nexus','Human resources','IHL','Info-management','Internal constraints','National or local systems','Other','Preparedness','Standards'];
                 // console.log(countsData);
                    $("#chart-challenge").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-challenge',
                        data: {
                           
                            type: 'bar',
                            columns: countsData,   
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        
                        color: {
                          pattern: [ "#51AF32", "#E84E0F"]
                        },
                        axis: {
                            rotated: false,
                            x: {
                                type: 'category',
                                categories: categoriesList
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                

            });
        } 

        function PopulateStokeHolderRegion() {
            var target = document.getElementById('chart-stakeholder-region');
            var spinner = new Spinner(opts).spin(target);           
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
             

                    var countsData = [  ['2017'], ['2018'], ['2019']];

                crises.forEach(function (element, index) {
                  if(element['ReportingYear']=='2016' && element['Stakeholder']=='Africa'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Asia'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Asia-Pacific'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Europe'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Global'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Latin America and the Caribbean'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='Middle East'){
                    countsData[0].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2016' && element['Stakeholder']=='North America'){
                    countsData[0].push(element['Total']);
                  } 
                   



                  if(element['ReportingYear']=='2017' && element['Stakeholder']=='Africa'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Asia'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Asia-Pacific'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Europe'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Global'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Latin America and the Caribbean'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='Middle East'){
                    countsData[1].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2017' && element['Stakeholder']=='North America'){
                    countsData[1].push(element['Total']);
                  } 




                  if(element['ReportingYear']=='2018' && element['Stakeholder']=='Africa'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Asia'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Asia-Pacific'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Europe'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Global'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Latin America and the Caribbean'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='Middle East'){
                    countsData[2].push(element['Total']);
                  } 
                   if(element['ReportingYear']=='2018' && element['Stakeholder']=='North America'){
                    countsData[2].push(element['Total']);
                  } 
                   





                });              
                
                  var categoriesList = ['Africa', 'Asia', 'Asia-Pacific','Europe','Global','Latin America and the Caribbean','Middle East','North America'];
                 // console.log(countsData);
                    $("#chart-stakeholder-region").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-region',
                        data: {
                           
                            type: 'bar',
                            columns: countsData,   
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        
                        color: {
                          pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                        },
                        axis: {
                            rotated: false,
                            x: {
                                type: 'category',
                                categories: categoriesList
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                

            });
        } 



        function PopulateStokeHolder2019(year) {
            var target = document.getElementById('chart-stakeholder-2019');
            var spinner = new Spinner(opts).spin(target);           
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/organization.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });              
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-2019").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-2019',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },

                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#F39C12"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-2019").fadeOut(1000);

                }

            });
        }   
        function PopulateStokeHolderRegion2018(year) {
            var target = document.getElementById('chart-stakeholder-region-2018');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-region-2018").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-region-2018',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#DD4B39"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-region-2018").fadeOut(1000);

                }

            });
        }
        function PopulateStokeHolderRegion2017(year) {
            var target = document.getElementById('chart-stakeholder-region-2018');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-region-2017").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-region-2017',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#DD4B39"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-region-2017").fadeOut(1000);

                }

            });
        }
        function PopulateStokeHolderRegion2019(year) {
            var target = document.getElementById('chart-stakeholder-region-2019');
            var spinner = new Spinner(opts).spin(target);
            // console.log(year);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/region.php', function (crises) {
                spinner.stop();
                var stakeHolders = ['StakeHolders'],
                    total = ['Total'],
                    reportingYear = ["ReportingYear"];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        // console.log(element['ReportingYear']);
                        stakeHolders.push(element['Stakeholder']);
                        total.push(Number(element['Total']));
                        reportingYear.push(element['ReportingYear']);
                    }

                });
                //console.log(reportingYear);
                //console.log(stakeHolders.length && total.length);
                if (stakeHolders.length > 1 && total.length) {

                    $("#chart-stakeholder-region-2019").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart-stakeholder-region-2019',
                        data: {
                            x: 'StakeHolders',
                            type: 'bar',
                            columns: [stakeHolders, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            stakeHolders, total
                        ],
                        color: {
                            pattern: ["#002840"]
                        },
                        axis: {
                            rotated: true,
                            x: {
                                type: 'category'
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 100,
                            right: 10
                        }
                    });
                } else {
                    $("#chart-stakeholder-region-2019").fadeOut(1000);

                }

            });
        }

        function PopulateChallenge2018(year) {
            var target = document.getElementById('chart_challenges-2018');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();
                var challengeID = ['ChallengeID'],
                    challengesShortCode = ['ChallengesShortCode'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        challengeID.push([element['ChallengeID']]);
                        challengesShortCode.push([element['ChallengesShortCode']]);
                        total.push(Number(element['Total']));
                    }
                });
                if (challengeID.length > 1 ) {
                    $("#chart_challenges").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart_challenges-2018',
                        data: {
                            x: 'ChallengesShortCode',
                            type: 'bar',
                            columns: [challengesShortCode, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            challengesShortCode, total
                        ],
                        color: {
                            pattern: ["#006699"]
                        },
                        axis: {

                            x: {
                                type: 'category',
                                tick: {
                                    rotate: 75,
                                    multiline: true
                                }
                            },
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 10,
                            right: 10
                        },

                    });
                } else {
                    $("#chart_challenges-2018").fadeOut(1000);
                }
            });
        }

        function PopulateChallenge2018(year) {
            var target = document.getElementById('chart_challenges-2018');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();
                var challengeID = ['ChallengeID'],
                    challengesShortCode = ['ChallengesShortCode'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        challengeID.push([element['ChallengeID']]);
                        challengesShortCode.push([element['ChallengesShortCode']]);
                        total.push(Number(element['Total']));
                    }
                });
                if (challengeID.length > 1) {
                    $("#chart_challenges").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart_challenges-2018',
                        data: {
                            x: 'ChallengesShortCode',
                            type: 'bar',
                            columns: [challengesShortCode, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            challengesShortCode, total
                        ],
                        color: {
                            pattern: ["#006699"]
                        },
                        axis: {

                            x: {
                                type: 'category'
                            },
                            tick: {
                                    rotate: 75,
                                    multiline: true
                                }
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 10,
                            right: 10
                        },

                    });
                } else {
                    $("#chart_challenges-2018").fadeOut(1000);
                }
            });
        }
        
        function PopulateChallenge2019(year) {
            var target = document.getElementById('chart_challenges-2019');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/challenges/get.php', function (crises) {
                spinner.stop();
                var challengeID = ['ChallengeID'],
                    challengesShortCode = ['ChallengesShortCode'],
                    reportingYear = ['ReportingYear'],
                    total = ['Total'];
                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == year) {
                        challengeID.push([element['ChallengeID']]);
                        challengesShortCode.push([element['ChallengesShortCode']]);
                        total.push(Number(element['Total']));
                    }
                });
                if (challengeID.length > 1 && total.length > 1) {
                    $("#chart_challenges").fadeIn(1000);
                    c3.generate({
                        bindto: '#chart_challenges-2019',
                        data: {
                            x: 'ChallengesShortCode',
                            type: 'bar',
                            columns: [challengesShortCode, total],
                            labels: true,
                        },
                        legend: {
                            show: false
                        },
                        types: {
                            data: 'bar'
                        },
                        groups: [
                            challengesShortCode, total
                        ],
                        color: {
                            pattern: ["#F6B54D"]
                        },
                        axis: {

                            x: {
                                type: 'category'
                            },
                            tick: {
                                    rotate: 75,
                                    multiline: true
                                }
                        },
                        size: {
                            height: 350
                        },
                        padding: {
                            left: 10,
                            right: 10
                        },

                    });
                } else {
                    $("#chart_challenges-2019").fadeOut(1000);
                }
            });
        }
        function PopulateCrossCuttingIssueTable2019(year) {


var target = document.getElementById('table-cci-table-2019');
var spinner = new Spinner(opts).spin(target);


var target = document.getElementById('table-cci-table-2019');
var spinner = new Spinner(opts).spin(target);
d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
data) {
    spinner.stop();
    if (error) {
        throw error;
    }
    var cci = ['CCI'],
        reportingYear = ['ReportingYear'],
        total = ['Total'];
    var myAssociativeArr = [];

    data.forEach(function (element, index) {
        var obj = {
            CCI: '',
            Total: ''
        };
        if (element['ReportingYear'] == year) {
            obj.CCI = element['CCI'];
            obj.Total = element['Total'];
            myAssociativeArr.push(obj);
        }
    });


    if (myAssociativeArr.length > 1) {
      myAssociativeArr.sort();
        var row =
            "<table id='cci1' class='table table-hover'><thead><tr class='header-row' style='cursor:pointer'><th>Cross Cutting Issues</th><th style='width: 95px;'>Total</th></tr></thead><tbody>";

        for (i = 1; i < myAssociativeArr.length; i++) {
            row = row +
                "<tr class='row-data'><td style='text-align:left;'>" +
                myAssociativeArr[i].CCI + "</td><td>" + myAssociativeArr[i].Total + "</td></tr>";
        }
        row = row + "</tbody></table>";
        document.getElementById("table-cci-table-2019").innerHTML = row;

    } else {
        $("#table-cci-table-2019").fadeOut(1000);
    }

});
}
function PopulateCrossCuttingIssueTable2018(year) {


var target = document.getElementById('table-cci-table-2018');
var spinner = new Spinner(opts).spin(target);


var target = document.getElementById('table-cci-table-2018');
var spinner = new Spinner(opts).spin(target);
d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
data) {
    spinner.stop();
    if (error) {
        throw error;
    }
    var cci = ['CCI'],
        reportingYear = ['ReportingYear'],
        total = ['Total'];
    var myAssociativeArr = [];

    data.forEach(function (element, index) {
        var obj = {
            CCI: '',
            Total: ''
        };
        if (element['ReportingYear'] == year) {
            obj.CCI = element['CCI'];
            obj.Total = element['Total'];
            myAssociativeArr.push(obj);
        }
    });


    if (myAssociativeArr.length > 1) {
      myAssociativeArr.sort();
        var row =
            "<table id='cci2' class='table table-hover sortable'><thead><tr class='header-row'  style='cursor:pointer'><th>Cross Cutting Issues</th><th style='width: 95px;'>Total</th></tr></thead><tbody>";

        for (i = 1; i < myAssociativeArr.length; i++) {
            row = row +
                "<tr class='row-data'><td style='text-align:left;'>" +
                myAssociativeArr[i].CCI + "</td><td>" + myAssociativeArr[i].Total + "</td></tr>";
        }
        row = row + "</tbody></table>";
        document.getElementById("table-cci-table-2018").innerHTML = row;

    } else {
        $("#table-cci-table-2018").fadeOut(1000);
    }

});
}
function PopulateCrossCuttingIssueTable2017(year) {


var target = document.getElementById('table-cci-table-2017');
var spinner = new Spinner(opts).spin(target);


var target = document.getElementById('table-cci-table-2017');
var spinner = new Spinner(opts).spin(target);
d3.json('https://www.agendaforhumanity.org/viz_endpoint/crosscutting-issues/get.php', function (error,
data) {
    spinner.stop();
    if (error) {
        throw error;
    }
    var cci = ['CCI'],
        reportingYear = ['ReportingYear'],
        total = ['Total'];
    var myAssociativeArr = [];

    data.forEach(function (element, index) {
        var obj = {
            CCI: '',
            Total: ''
        };
        if (element['ReportingYear'] == year) {
            obj.CCI = element['CCI'];
            obj.Total = element['Total'];
            myAssociativeArr.push(obj);
        }
    });


    if (myAssociativeArr.length > 1) {
      myAssociativeArr.sort();
        var row =
            "<table id='cci3' class='table table-hover sortable'><thead><tr class='header-row'  style='cursor:pointer'><th>Cross Cutting Issues</th><th style='width: 95px;'>Total</th></tr></thead><tbody>";

        for (i = 1; i < myAssociativeArr.length; i++) {
            row = row +
                "<tr class='row-data'><td style='text-align:left;'>" +
                myAssociativeArr[i].CCI + "</td><td>" + myAssociativeArr[i].Total + "</td></tr>";
        }
        row = row + "</tbody></table>";
        document.getElementById("table-cci-table-2017").innerHTML = row;

    } else {
        $("#table-cci-table-2017").fadeOut(1000);
    }

});
}
function PopulateStackholderTotal2017(year) {

var target = document.getElementById('total-stackholder-2016');
var spinner = new Spinner(opts).spin(target);


d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
    spinner.stop();
  
    var total = ['Total'],
        reportingYear = ['ReportingYear'];
    crises.forEach(function (element, index) {
        if (element['ReportingYear'] == year) {
            total.push(Number(element['Total']));
        }
    });


    if (total.length > 0 && total[1] != undefined) {
        $("#total-stackholder-2016").fadeIn(1000);
        
        $('#total-stackholder-2016').html(
           
            total[1]);
       



    } else {

        $('#total-stackholder-2016').fadeOut(1000);
      
    }
});
}
function PopulateStackholderTotal2018(year) {

var target = document.getElementById('total-stakeholder-2017');
var spinner = new Spinner(opts).spin(target);


d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
    spinner.stop();
   
    var total = ['Total'],
        reportingYear = ['ReportingYear'];
    crises.forEach(function (element, index) {
        if (element['ReportingYear'] == year) {
            total.push(Number(element['Total']));
        }
    });


    if (total.length > 0 && total[1] != undefined) {
        $("#total-stackholder-2017").fadeIn(1000);
      
        $('#total-stakeholder-2017').html(
           
            total[1] );
       



    } else {

        $('#total-stakeholder-2017').fadeOut(1000);
      
    }
});
}
function PopulateStackholderTotal2019(year) {

var target = document.getElementById('total-stakeholder-2018');
var spinner = new Spinner(opts).spin(target);


d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {
    spinner.stop();
   
    var total = ['Total'],
        reportingYear = ['ReportingYear'];
    crises.forEach(function (element, index) {
        if (element['ReportingYear'] == year) {
            total.push(Number(element['Total']));
        }
    });


    if (total.length > 0 && total[1] != undefined) {
        $("#total-stackholder-2018").fadeIn(1000);
      
        $('#total-stakeholder-2018').html(
           
            total[1] );
       



    } else {

        $('#total-stakeholder-2018').fadeOut(1000);
      
    }
});
}

function PopulateReportStatusDashboard2016(year, dom) {
            reportedapi = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            var reported = ['Reported'],
                notreported = ['Not reported'];

                let total=0;
                
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php', function (crises) {

                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            reported.push([Number(element['Reported'])]);
                            total = total + Number(element['Reported']);
                        }
                    });

                    var target = document.getElementById('chart-stakeholder-line');
                    var spinner = new Spinner(opts).spin(target);
                    d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/notreported.php', function (crises) {

                            crises.forEach(function (element, index) {
                                if (element['ReportingYear'] == year) {
                                    notreported.push([Number(element['NotReported'])]);
                                    total = total + Number(element['NotReported']);
                                }

                            });
                            //chart     


                               

                            

                            

                            if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);
              
                    

                    chart_reported_2016 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#00B1EB', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return value;
                                }
                            },
                          
                            title:  total+" stakeholders in "+(parseInt(year+1))


                        },
                        legend: {
                            show: false
                        },
                        tooltip: {

                            format: {
                                value: function (value, ratio, id) {
                                    var percentFormat = d3.format('.1%');
                                  ///  var per = (value * 100) / total;
                                    var h = (value) + ' <br />(' + percentFormat(ratio) + ')'
                                    return (value) + ' (' + percentFormat(ratio) + ')';
                                }
                            }
                        }



                    });
                    var label = d3.select('#charts_reported_2016 text.c3-chart-arcs-title');
 
                    label.html(''); // remove existant text
                    label.insert('tspan').text(total).attr('dy', -20).attr('x', 0).attr('class','big-font');
                    label.insert('tspan').text('Total').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                    label.insert('tspan').text('stakeholders').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                    label.insert('tspan').text('2017').attr('dy', 25).attr('x', 0).attr('class', 'small-fontlast');

                   
                } else {
                    $("#" + dom).fadeOut(1000);
                }




                    });

            });

        }


        function PopulateReportStatusDashboard2017(year, dom) {
            reportedapi = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            var reported = ['Reported'],
                notreported = ['Not reported'];
                let total =0;
                
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php', function (crises) {

                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            reported.push([Number(element['Reported'])]);
                            total = total + Number(element['Reported']);
                        }
                    });

                    var target = document.getElementById('chart-stakeholder-line');
                    var spinner = new Spinner(opts).spin(target);
                    d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/notreported.php', function (crises) {

                            crises.forEach(function (element, index) {
                                if (element['ReportingYear'] == year) {
                                    notreported.push([Number(element['NotReported'])]);
                                    total = total + Number(element['NotReported']);
                                }

                            });
                            //chart     


                              

                            if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);

                    chart_reported_2017 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#51AF32', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return value;
                                }
                            },
                            title:  total+" stakeholders in "+(parseInt(year+1))



                        },
                        legend: {
                            show: false
                        },
                        tooltip: {

                            format: {
                                value: function (value, ratio, id) {
                                    var percentFormat = d3.format('.1%');
                                  ///  var per = (value * 100) / total;
                                    var h = (value) + ' <br />(' + percentFormat(ratio) + ')'
                                    return (value) + ' (' + percentFormat(ratio) + ')';
                                }
                            }
                        }



                    });
                    var label = d3.select('#charts_reported_2017 text.c3-chart-arcs-title');
 
                        label.html(''); // remove existant text
                        label.insert('tspan').text(total).attr('dy', -20).attr('x', 0).attr('class','big-font');
                        label.insert('tspan').text('Total').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                        label.insert('tspan').text('stakeholders').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                        label.insert('tspan').text('2018').attr('dy', 25).attr('x', 0).attr('class', 'small-fontlast');

                } else {
                    $("#" + dom).fadeOut(1000);
                }




                    });

            });








        }

        function PopulateReportStatusDashboard2018(year, dom) {
            reportedapi = "https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php";
            var target = document.getElementById(dom);
            var spinner = new Spinner(opts).spin(target);
            var reported = ['Reported'],
                notreported = ['Not reported'];
                let total=0;
                
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/reported.php', function (crises) {

                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == year) {
                            reported.push([Number(element['Reported'])]);
                            total = total + Number(element['Reported']);
                        }
                    });

                    var target = document.getElementById('chart-stakeholder-line');
                    var spinner = new Spinner(opts).spin(target);
                    d3.json('https://www.agendaforhumanity.org/viz_endpoint/dashboard/notreported.php', function (crises) {

                            crises.forEach(function (element, index) {
                                if (element['ReportingYear'] == year) {
                                    notreported.push([Number(element['NotReported'])]);
                                    total = total + Number(element['NotReported']);
                                }

                            });
                            //chart     


                              

                            if (reported.length > 1) {

                    $("#" + dom).fadeIn(1000);

                    chart_reported_2018 = c3.generate({
                        bindto: '#' + dom,
                        data: {

                            columns: [reported, notreported],
                            type: 'donut',
                        },
                        color: {
                            pattern: ['#E84E0F', '#F7A600']
                        },
                        donut: {
                            label: {
                                format: function (value, ratio, id) {
                                    return value;
                                }
                            },
                            title:  total+" stakeholders in "+(parseInt(year+1))



                        },
                        legend: {
                            show: false
                        },
                        tooltip: {

                            format: {
                                value: function (value, ratio, id) {
                                    var percentFormat = d3.format('.1%');
                                  ///  var per = (value * 100) / total;
                                    var h = (value) + ' <br />(' + percentFormat(ratio) + ')'
                                    return (value) + ' (' + percentFormat(ratio) + ')';
                                }
                            }
                        }



                    });
                    var label = d3.select('#charts_reported_2018 text.c3-chart-arcs-title');
 
                    label.html(''); // remove existant text
                    label.insert('tspan').text(total).attr('dy', -20).attr('x', 0).attr('class','big-font');
                    label.insert('tspan').text('Total').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                    label.insert('tspan').text('stakeholders').attr('dy', 25).attr('x', 0).attr('class', 'small-font');
                    label.insert('tspan').text('2019').attr('dy', 25).attr('x', 0).attr('class', 'small-fontlast');

                } else {
                    $("#" + dom).fadeOut(1000);
                }




                    });

            });








        }


  </script>
 
 <script src='js/tablesort.min.js'></script>

 <!-- Include sort types you need -->
 <script src='js/tablesort.number.min.js'></script>


 <script>
   window.onload = function() {
    new Tablesort(document.getElementById('cci1'));
  new Tablesort(document.getElementById('cci2'));
  new Tablesort(document.getElementById('cci3'));
}

</script>


</body>

</html>