<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Agenda for Humanity Viz | Dashboard</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="vendor/Ionicons/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="css/AdminLTE.min.css">
    <link rel="shortcut icon" href="img/favicon.png" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="css/skins/skin-blue.min.css">
    <link rel="stylesheet" href="css/c3.css">
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <!-- Google Font -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

        #chart-stakeholder-2018,
        #chart-stakeholder-2018,
        #chart-stakeholder-region-2019,
        #chart-stakeholder-2019,
        #chart-stakeholder-region-2018,
        #chart-transformation,
        #chart_challenges-2019,
        #chart-challenge-2018 {
            cursor: pointer;
        }

        .c3-line {
            stroke-width: 5px;
        }

        .c3-circle {
            fill: black !important;
        }

        th[role=columnheader]:not(.no-sort) {
	cursor: pointer;
}

th[role=columnheader]:not(.no-sort):after {
	content: '';
	float: right;
	margin-top: 7px;
	border-width: 0 4px 4px;
	border-style: solid;
	border-color: #404040 transparent;
	visibility: hidden;
	opacity: 0;
	-ms-user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	user-select: none;
}

th[aria-sort=ascending]:not(.no-sort):after {
	border-bottom: none;
	border-width: 4px 4px 0;
}

th[aria-sort]:not(.no-sort):after {
	visibility: visible;
	opacity: 0.4;
}

th[role=columnheader]:not(.no-sort):hover:after {
	visibility: visible;
	opacity: 1;
}
    </style>
</head>


<body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">

        <!-- Main Header -->
        <header class="main-header">

            <!-- Logo -->
            <a href="index2.html" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>V</b>IZ</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>Dashboard VIZ</b></span>
            </a>

            <!-- Header Navbar -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                    <span class="sr-only">Toggle navigation</span>
                </a>
                <!-- Navbar Right Menu -->
                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav">
                        <!-- Messages: style can be found in dropdown.less-->
                        <li class="dropdown messages-menu">
                            <!-- Menu toggle button -->


                            <!-- /.messages-menu -->

                            <!-- Notifications Menu -->

                            <!-- Tasks Menu -->

                            <!-- User Account Menu -->
                        <li class="dropdown user user-menu">
                            <!-- Menu Toggle Button -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <!-- The user image in the navbar-->

                                <!-- hidden-xs hides the username on small devices so only the image appears. -->
                                <span class="hidden-xs">Welcome to Agenda for Humanitarian Data Visualization
                                    Dashboard</span>
                            </a>

                        </li>
                        <!-- Control Sidebar Toggle Button -->

                    </ul>
                </div>
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">

            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">

                <!-- Sidebar user panel (optional) -->
                <div class="user-panel">
                    <div class="pull-left image">

                    </div>

                </div>

                <!-- search form (Optional) -->

                <!-- /.search form -->

                <!-- Sidebar Menu -->
                <ul class="sidebar-menu" data-widget="tree">
                    <li class="header">MAIN NAVIGATION</li>
                    <!-- Optionally, you can add icons to the links -->
                    <li><a href="index.html"><i class="fas fa-tv"></i> &nbsp;<span>Dashboard</span></a></li>
                    <li><a class="active" href="transformation.html"><i class="fas fa-laptop"></i>
                            <span>Transformation</span></a></li>
                    <li><a href="stakeholder.html"><i class="fas fa-user-friends"></i> &nbsp;
                            <span>Stakeholders</span></a></li>
                    <li><a href="challenges.html"><i class="fas fa-desktop"></i> &nbsp; <span>Challenges</span></a></li>
                    <li><a href="ranu/Tree_viz.html" target="_blank"><i class="fas fa-desktop"></i> &nbsp; <span>Subcategory - Tree Viz</span></a></li>
                    <li><a href="ranu/treemap.html" target="_blank"><i class="fas fa-desktop"></i> &nbsp; <span>Subcategory - Tree map</span></a></li>
                </ul>
                <table style="margin-top: 50px; color: #fff;" class="table  table-condesed">
                        <tr><td>1A - Demonstrate timely, coherent and decisive political leadership	</td></tr>
                        <tr><td>1B - Act early	</td></tr>
                        <tr><td>1C - Remain engaged and invest in stability	</td></tr>
                        <tr><td>1D - Develop solutions with and for people	</td></tr>
                        <tr><td>2A - Respect and protect civilians and civilian objects in the conduct of hostilities	</td></tr>
                        <tr><td>2B - Ensure full access to and protection of the humanitarian and medical missions	</td></tr>
                        <tr><td>2C - Speak out on violations	</td></tr>
                        <tr><td>2D - Take concrete steps to improve compliance and accountability	</td></tr>
                        <tr><td>2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity	</td></tr>
                        <tr><td>3A - Reduce and address displacement	</td></tr>
                        <tr><td>3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration	</td></tr>
                        <tr><td>3C - End statelessness in the next decade	</td></tr>
                        <tr><td>3D - Empower and protect women and girls	</td></tr>
                        <tr><td>3E - Eliminate gaps in education for children, adolescents and young people	</td></tr>
                        <tr><td>3F - Enable adolescents and young people to be agents of positive transformation	</td></tr>
                        <tr><td>3G - Address other groups or minorities in crisis settings	</td></tr>
                        <tr><td>4A - Reinforce, do not replace, national and local systems	</td></tr>
                        <tr><td>4B - Anticipate, do not wait, for crises	</td></tr>
                        <tr><td>4C - Deliver collective outcomes: transcend humanitarian-development divides	</td></tr>
                        <tr><td>5A - Invest in local capacities	</td></tr>
                        <tr><td>5B - Invest according to risk	</td></tr>
                        <tr><td>5C - Invest in stability	</td></tr>
                        <tr><td>5D - Finance outcomes, not fragmentation: shift from funding to financing	</td></tr>
                        <tr><td>5E - Diversify the resource base and increase cost-efficiency	</td></tr>
                      </table> 
            </section>
        </aside>


        <div class="content-wrapper">
            <section class="content-header">
                <h1>
                    Transformation

                </h1>

            </section>

            <section class="content container-fluid">

                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title"></h3>
                            </div>
                            <div class="box-body no-padding" style="padding-left: 20px;padding-right: 20px;">
                                <div id="chart_transformation_comp"></div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title">Transformation Variation</h3>
                            </div>
                            <div class="box-body no-padding">
                                <div id="container">
                                    <canvas id="canvas"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title">Transformation</h3>
                            </div>
                            <div class="box-body no-padding" style="padding-left: 20px;padding-right: 20px;">
                                <div id="chart-transformation-bar"></div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-warning">
                            <div class="box-header with-border">
                                <h3 class="box-title">Transformation Variation</h3>
                            </div>
                            <div class="box-body no-padding">
                                <div id="transformation-variation">

                                </div>
                            </div>
                        </div>
                    </div>



                </div>





            </section>
        </div>

        <footer class="main-footer">
            <!-- To the right -->
            <div class="pull-right hidden-xs">

            </div>
            <!-- Default to the left -->
            <strong>Copyright &copy; 2019. Agenda For Humanity.</strong> All rights reserved.
        </footer>



        <!-- REQUIRED JS SCRIPTS -->

        <!-- jQuery 3 -->
        <script src="vendor/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap 3.3.7 -->
        <script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- AdminLTE App -->
        <script src="js/adminlte.min.js"></script>
        <script src="js/spin.js"></script>


        <script src="js/d3.min.js"></script>
        <script src="js/c3.min.js"></script>
        <script src='https://unpkg.com/chart.js@2.8.0/dist/Chart.bundle.js'></script>
        <script src='https://unpkg.com/chartjs-chart-box-and-violin-plot@2/build/Chart.BoxPlot.js'></script>
      
        <script>
            PopulateTransformation("2016");
            PopulateTransformation("2017");
            PopulateTransformation("2018");

            PopulateTransformationBar(2018);







            function PopulateTransformation(year) {

                var total2016, total2017, total2018;

d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {

    crises.forEach(function (element, index) {
        if (element['ReportingYear'] == "2016") {
            total2016 = element['Total'];

        } else if (element['ReportingYear'] == "2017") {
            total2017 = element['Total'];
        } else if (element['ReportingYear'] == "2018") {
            total2018 = element['Total'];
        }
    });

    var target = document.getElementById('chart_transformation_comp');
    var spinner = new Spinner(opts).spin(target);
    var tran = [];
    // console.log(total2018);
    d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (
        crises) {
        spinner.stop();
        var a1 = ['1A'];
        var transformation_short = ['Transformation_Short'];
        var total = ['Total'];
        var transformation_long = ['Transformation_Long'];

        var countsData = [
            ['2017'],
            ['2018'],
            ['2019']
        ];

        crises.forEach(function (element, index) {
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '1A') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));

            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '1A') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));

            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '1A') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));

            }

            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '1B') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));

            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '1B') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));

            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '1B') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));

            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '1C') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '1C') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '1C') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '1D') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '1D') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '1D') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '2A') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '2A') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '2A') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '2B') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '2B') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '2B') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '2C') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '2C') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '2C') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '2D') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '2D') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '2D') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '2E') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '2E') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '2E') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3A') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3A') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3A') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3B') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3B') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3B') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3C') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3C') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3C') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3D') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3D') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3D') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3E') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3E') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3E') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3F') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3F') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3F') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '3G') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '3G') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '3G') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '4A') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '4A') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '4A') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '4B') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '4B') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '4B') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '4C') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '4C') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '4C') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '5A') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '5A') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '5A') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '5B') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '5B') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '5B') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '5C') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '5C') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '5C') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '5D') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '5D') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '5D') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }
            if (element['ReportingYear'] == '2016' && element[
                    'Transformation_Short'] ==
                '5E') {
                let per = (element['Total'] * 100) / total2016;
                countsData[0].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2017' && element[
                    'Transformation_Short'] == '5E') {
                let per = (element['Total'] * 100) / total2017;
                countsData[1].push(per.toFixed(1));
            } else if (element['ReportingYear'] == '2018' && element[
                    'Transformation_Short'] == '5E') {
                let per = (element['Total'] * 100) / total2018;
                countsData[2].push(per.toFixed(1));
            }

        });

        var categoriesList = ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A',
            '3B',
            '3C', '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
        ];

        chart_transformation_comps = c3.generate({
            bindto: '#chart_transformation_comp',
            data: {

                columns: countsData,
                labels: false,
                type: 'line',
                padding: {
                    left: 60
                },


            },
            color: {
                pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
            },
            axis: {
                rotated: false,
                x: {
                    type: 'category',
                    categories: categoriesList
                },
                y: {
                    show: false
                }
            },
            padding:{
                bottom: 40
            },
            tooltip: {
                format: {
                    title: function (d) {
                        if (d === 0) {
                            return '1A - Demonstrate timely, coherent and decisive political leadership';
                        } else if (d === 1) {
                            return '1B - Act early';
                        } else if (d === 2) {
                            return '1C - Remain engaged and invest in stability';

                        } else if (d === 3) {
                            return '1D - Develop solutions with and for people';

                        } else if (d === 4) {

                            return '2A - Respect and protect civilians and civilian objects in the conduct of hostilities';
                        } else if (d === 5) {
                            return '2B - Ensure full access to and protection of the humanitarian and medical missions';

                        } else if (d === 6) {
                            return '2C - Speak out on violations';

                        } else if (d === 7) {
                            return '2D - Take concrete steps to improve compliance and accountability';

                        } else if (d === 8) {
                            return '2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity';

                        } else if (d === 9) {
                            return '3A - Reduce and address displacement';

                        } else if (d === 10) {
                            return '3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration';

                        } else if (d === 11) {
                            return '3C - End statelessness in the next decade';

                        } else if (d === 12) {
                            return '3D - Empower and protect women and girls';

                        } else if (d === 13) {
                            return '3E - Eliminate gaps in education for children, adolescents and young people';

                        } else if (d === 14) {
                            return '3F - Enable adolescents and young people to be agents of positive transformation';

                        } else if (d === 15) {
                            return '3G - Address other groups or minorities in crisis settings';

                        } else if (d === 16) {
                            return '4A - Reinforce, do not replace, national and local systems';

                        } else if (d === 17) {
                            return '4B - Anticipate, do not wait, for crises';

                        } else if (d === 18) {
                            return '4C - Deliver collective outcomes: transcend humanitarian-development divides';

                        } else if (d === 19) {
                            return '5A - Invest in local capacities';

                        } else if (d === 20) {
                            return '5B - Invest according to risk';

                        } else if (d === 21) {
                            return '5C - Invest in stability';

                        } else if (d === 22) {
                            return '5D - Finance outcomes, not fragmentation: shift from funding to financing';

                        } else if (d === 23) {
                            return '5E - Diversify the resource base and increase cost-efficiency';
                        }





                    },

                    value: function (value, ratio, id) {

                        return value + "%";
                    }

                }
            }
        });

        d3.select(".c3-legend-item .c3-legend-item-2017 .c3-legend-item-2018 .c3-legend-item-2019"). style("float", "right").attr("transform", "translate(0,7)");


    });



});





}


            var opts = {
                lines: 9, // The number of lines to draw
                length: 9, // The length of each line
                width: 5, // The line thickness
                radius: 14, // The radius of the inner circle
                color: '#002840', // #rgb or #rrggbb or array of colors
                speed: 1.9, // Rounds per second
                trail: 40, // Afterglow percentage
                className: 'spinner', // The CSS class to assign to the spinner
            };



            function PopulateTransformationBar(year) {
                var target = document.getElementById('chart-transformation-bar');
            var spinner = new Spinner(opts).spin(target);
            d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (crises) {
                spinner.stop();
                var a1 = ['1A'];
                var transformation_short = ['Transformation_Short'];
                var total = ['Total'];
                var transformation_long = ['Transformation_Long'];

                var countsData = [
                    ['2017'],
                    ['2018'],
                    ['2019']
                ];

                crises.forEach(function (element, index) {
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1A') {
                        countsData[2].push(element['Total']);
                    }

                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '1D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '1D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '2E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '2E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3E') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3F') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3F') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '3G') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '3G') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '4C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '4C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5A') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5A') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5B') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5B') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5C') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5C') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5D') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5D') {
                        countsData[2].push(element['Total']);
                    }
                    if (element['ReportingYear'] == '2016' && element['Transformation_Short'] ==
                        '5E') {
                        countsData[0].push(element['Total']);
                    } else if (element['ReportingYear'] == '2017' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[1].push(element['Total']);
                    } else if (element['ReportingYear'] == '2018' && element[
                            'Transformation_Short'] == '5E') {
                        countsData[2].push(element['Total']);
                    }

                });

                var categoriesList = ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A', '3B',
                    '3C', '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
                ];

                transforms = c3.generate({
                    bindto: '#chart-transformation-bar',
                    data: {

                        columns: countsData,
                        labels: true,
                        type: 'bar',
                        padding: {
                            left: 60,
                            bottom: 40
                        },


                    },
                    color: {
                        pattern: ["#00B1EB", "#51AF32", "#E84E0F"]
                    },
                    axis: {
                        rotated: false,
                        x: {
                            type: 'category',
                            categories: categoriesList
                        },
                        y: {
                            show: false
                        }
                    },
                    padding: {
                               
                                bottom: 40
                            },
                    tooltip: {
                        format: {
                            title: function (d) {
                                if (d === 0) {
                                    return '1A - Demonstrate timely, coherent and decisive political leadership';
                                } else if (d === 1) {
                                    return '1B - Act early';
                                } else if (d === 2) {
                                    return '1C - Remain engaged and invest in stability';

                                } else if (d === 3) {
                                    return '1D - Develop solutions with and for people';

                                } else if (d === 4) {

                                    return '2A - Respect and protect civilians and civilian objects in the conduct of hostilities';
                                } else if (d === 5) {
                                    return '2B - Ensure full access to and protection of the humanitarian and medical missions';

                                } else if (d === 6) {
                                    return '2C - Speak out on violations';

                                } else if (d === 7) {
                                    return '2D - Take concrete steps to improve compliance and accountability';

                                } else if (d === 8) {
                                    return '2E - Uphold the rules: a global campaign to affirm the norms that safeguard humanity';

                                } else if (d === 9) {
                                    return '3A - Reduce and address displacement';

                                } else if (d === 10) {
                                    return '3B - Address the vulnerabilities of migrants and provide more regular and lawful opportunities for migration';

                                } else if (d === 11) {
                                    return '3C - End statelessness in the next decade';

                                } else if (d === 12) {
                                    return '3D - Empower and protect women and girls';

                                } else if (d === 13) {
                                    return '3E - Eliminate gaps in education for children, adolescents and young people';

                                } else if (d === 14) {
                                    return '3F - Enable adolescents and young people to be agents of positive transformation';

                                } else if (d === 15) {
                                    return '3G - Address other groups or minorities in crisis settings';

                                } else if (d === 16) {
                                    return '4A - Reinforce, do not replace, national and local systems';

                                } else if (d === 17) {
                                    return '4B - Anticipate, do not wait, for crises';

                                } else if (d === 18) {
                                    return '4C - Deliver collective outcomes: transcend humanitarian-development divides';

                                } else if (d === 19) {
                                    return '5A - Invest in local capacities';

                                } else if (d === 20) {
                                    return '5B - Invest according to risk';

                                } else if (d === 21) {
                                    return '5C - Invest in stability';

                                } else if (d === 22) {
                                    return '5D - Finance outcomes, not fragmentation: shift from funding to financing';

                                } else if (d === 23) {
                                    return '5E - Diversify the resource base and increase cost-efficiency';
                                }





                            },

                            //value: d3.format(',') // apply this format to both y and y2
                        }
                    }
                });
                d3.select(".c3-legend-item .c3-legend-item-2017 .c3-legend-item-2018 .c3-legend-item-2019"). style("float", "right").attr("transform", "translate(0,7)");



            });


            }
        </script>
        <!--   <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.6.0/d3.min.js"></script>-->
        <script>
            PopulateTransformationVariation();

            function filterJSON(json, key) {

                var result = [];
                if (key)
                    result = json.filter(function (item) {
                        return item.Transformation_Short == key
                    });

                return result;
            }



            function PopulateTransformationVariation() {

                var total2016, total2017, total2018;

                d3.json('https://www.agendaforhumanity.org/viz_endpoint/stakeholder/total.php', function (crises) {

                    crises.forEach(function (element, index) {
                        if (element['ReportingYear'] == "2016") {
                            total2016 = element['Total'];

                        } else if (element['ReportingYear'] == "2017") {
                            total2017 = element['Total'];
                        } else if (element['ReportingYear'] == "2018") {
                            total2018 = element['Total'];
                        }
                    });

                    d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (
                        crises) {

                        var a1 = ['1A'];
                        var transformation_short = ['Transformation_Short'];
                        var total = ['Total'];
                        var transformation_long = ['Transformation_Long'];

                        var countsData = [
                            ['Tran'],
                            ['2017'],
                            ['2018'],
                            ['2019']
                        ];
                        var countsData1 = [
                            ['Tran'],
                            ['2017'],
                            ['2018'],
                            ['2019']
                        ];

                        crises.forEach(function (element, index) {
                            if (element['Transformation_Short'] == '1A') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '1A') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '1A') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;'>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                countsData1[2].push(element['Total']);
                                prev1 = element['Total'];


                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '1A') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev1 = element['Total'];
                            }
                            countsData1[3].push(element['Total']);


                            if (element['Transformation_Short'] == '1B') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '1B') {

                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '1B') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev2 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '1B') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev2 = element['Total'];

                            }

                            if (element['Transformation_Short'] == '1C') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '1C') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '1C') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev3 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '1C') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }



                                prev3 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '1D') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '1D') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '1D') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev4 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '1D') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev4 = element['Total'];
                            }
                            if (element['Transformation_Short'] == '2A') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '2A') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '2A') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev5 = element['Total']
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '2A') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev5 = element['Total']
                            }

                            if (element['Transformation_Short'] == '2B') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '2B') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '2B') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev6 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '2B') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev6 = element['Total'];
                            }
                            if (element['Transformation_Short'] == '2C') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '2C') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '2C') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev7 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '2C') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev7 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '2D') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '2D') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }

                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '2D') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev8 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '2D') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev8 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '2E') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '2E') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '2E') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev9 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '2E') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev9 = element['Total'];
                            }




                            if (element['Transformation_Short'] == '3A') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3A') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3A') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev10 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3A') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev10 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '3B') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3B') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3B') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev11 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3B') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev11 = element['Total'];
                            }
                            if (element['Transformation_Short'] == '3C') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3C') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3C') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev12 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3C') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev12 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '3D') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3D') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3D') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev13 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3D') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev13 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '3E') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3E') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3E') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev14 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3E') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev14 = element['Total'];
                            }
                            if (element['Transformation_Short'] == '3F') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3F') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3F') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev15 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3F') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev15 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '3G') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '3G') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '3G') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev16 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '3G') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev16 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '4A') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '4A') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '4A') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev17 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '4A') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev17 = element['Total'];
                            }



                            if (element['Transformation_Short'] == '4B') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '4B') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '4B') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev18 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '4B') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev18 = element['Total'];

                            }

                            if (element['Transformation_Short'] == '4C') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '4C') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '4C') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev19 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '4C') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev19 = element['Total'];
                            }



                            if (element['Transformation_Short'] == '5A') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '5A') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '5A') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev20 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '5A') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev20 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '5B') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '5B') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '5B') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev21 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '5B') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev21 = element['Total'];
                            }
                            if (element['Transformation_Short'] == '5C') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '5C') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '5C') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev22 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '5C') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev22 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '5D') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '5D') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '5D') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev23 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '5D') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                prev23 = element['Total'];
                            }

                            if (element['Transformation_Short'] == '5E') {
                                countsData[0].push(element['Transformation_Long']);
                            }
                            if (element['ReportingYear'] == '2016' && element[
                                    'Transformation_Short'] ==
                                '5E') {
                                    let per = (element['Total'] * 100) / total2016;
                                    if (per > 0.00) {
                                    countsData[1].push(element['Total'] +
                                        " <span>&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else if (per < 0) {
                                    countsData[1].push(element['Total'] +
                                        " <span style='color:red;'>'&nbsp;&nbsp;" +
                                        "(" + per.toFixed(1) + "%)" + "</span>");
                                } else {
                                    countsData[1].push(element['Total']);
                                }
                            }
                            if (element['ReportingYear'] == '2017' && element[
                                    'Transformation_Short'] ==
                                '5E') {
                                    let per = (element['Total'] * 100) / total2017;
                                if (per > 0.00) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[2].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[2].push(element['Total']);
                                }
                                prev24 = element['Total'];
                            }
                            if (element['ReportingYear'] == '2018' && element[
                                    'Transformation_Short'] ==
                                '5E') {
                                    let per = (element['Total'] * 100) / total2018;
                                if (per > 0.00) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:green;>'&nbsp;&nbsp;<i class='fas fa-arrow-up'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else if (per < 0) {
                                    countsData[3].push(element['Total'] +
                                        " <span style='color:red;>'&nbsp;&nbsp;<i class='fas fa-arrow-down'></i>&nbsp;&nbsp;" +
                                        "<sup>" + per.toFixed(1) + "%</sup>" + "</span>");
                                } else {
                                    countsData[3].push(element['Total']);
                                }
                                countsData1[3].push(element['Total']);
                                prev24 = element['Total'];
                            }




                        });
                        let html = '';

                        html += "<table id='trans1' class='table table-hover sortable'>";
                        html +=
                            "<thead><tr style='cursor:pointer;'><th>TRANSFORMATION</th><th>2017</th><th>2018</th><th>2019</th></tr></thead><tbody>";
                        let j = 0;
                        let c = 1;
                        let index = 0;
                        let va;
                        for (x = 1; x <= countsData[1].length -1; x++) {
                            plot = [];
                            html += "<tr><td>" + countsData[j][c] + "</td>";
                            for (y = 1; y <= 3; y++) {
                                if (y != 1) {
                                    plot.push(countsData[y][x]);
                                }
                                html += "<td>" + countsData[y][x] + "</td>";
                                va = countsData[y][x];
                                index++;
                            }

                            html += "<td><div id='ch-" + countsData[j][c].substr(0, 2) +
                                "'></div></td></tr>";

                            c = index + 1;
                        }
                        html += "</tbody></table>";

                        $("#transformation-variation").append(html);









                    });



                });



            }
            drawPlot();

            function drawPlot() {

                //We grab the data from the transformation api endpoint
                d3.json('https://www.agendaforhumanity.org/viz_endpoint/transformation/get.php', function (error,
                    data) {

                    if (error) {
                        throw error;
                    }
                    var transformation_short = ['Transformation_Short'],
                        total = ['Total'],
                        transformation_long = ['Transformation_Long'];
                    // we define an array for each main categroy. i.e: (for 1a, 1b, 1c, ..... 5e)
                    var a1 = ['1A'];
                    var b1 = ['1B'];
                    var c1 = ['1C'];
                    var d1 = ['1D'];
                    var a2 = ['2A'];
                    var b2 = ['2B'];
                    var c2 = ['2C'];
                    var d2 = ['2D'];
                    var e2 = ['2E'];
                    var a3 = ['3A'];
                    var b3 = ['3B'];

                    var c33 = ['3C'];
                    var d33 = ['3D'];

                    var e3 = ['3E'];
                    var f3 = ['3F'];
                    var g3 = ['3G'];

                    var a4 = ['4A'];
                    var b4 = ['4B'];
                    var c4 = ['4C'];
                    var a5 = ['5A'];
                    var b5 = ['5B'];
                    var c5 = ['5C'];
                    var d5 = ['5D'];
                    var e5 = ['5E'];


                    data.forEach(function (element, index) {

                        // iteratively we read the api end point an add it to the array defined earlier. so for example: 1a array holds data related to 1a.

                        if (element['Transformation_Short'] == '1A') {
                            a1.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "1B") {
                            b1.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "1C") {
                            c1.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "1D") {
                            d1.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "2A") {
                            a2.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "2B") {
                            b2.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "2C") {
                            c2.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "2D") {
                            d2.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "2E") {
                            e2.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3A") {
                            a3.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3B") {
                            b3.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3C") {
                            c33.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3D") {
                            d33.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3E") {
                            e3.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3F") {
                            f3.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "3G") {
                            g3.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "4A") {
                            a4.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "4B") {
                            b4.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "4C") {
                            c4.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "5A") {
                            a5.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "5B") {
                            b5.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "5C") {
                            c5.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "5D") {
                            d5.push(Number(element['Total']));
                        } else if (element['Transformation_Short'] == "5E") {
                            e5.push(Number(element['Total']));
                        }
                        
                        // at this point all defined arrays holds the data.
                    });
                    const boxplotData = {
                        // here define label tree
                        labels: ['1A', '1B', '1C', '1D', '2A', '2B', '2C', '2D', '2E', '3A', '3B', '3C',
                            '3D', '3E', '3F', '3G', '4A', '4B', '4C', '5A', '5B', '5C', '5D', '5E'
                        ],
                        datasets: [{
                            label: 'Transformation',
                            backgroundColor: 'rgba(255,0,0,0.5)',
                            borderColor: 'red',
                            borderWidth: 1,
                            outlierColor: '#999999',
                            padding: 10,
                            itemRadius: 0,
                            outlierColor: '#999999',
                            //below for the dataset data, we assigned the array we defined earlier.
                            data: [
                                a1, b1, c1, d1, a2, b2, c2, d2, e2, a3, b3, c33, d33, e3, f3,
                                g3, a4, b4, c4, a5, b5, c5, d5, e5
                            ]
                        }]
                    };

                    // at this point the boxplotData constant veriable hold the data as well as the lable that we can use for the boxplot chart.

                    BoxPlot(boxplotData); // here we passed the boxplotdata to 'BoxPlot' function
                });
            }

            function BoxPlot(boxplotData) {
              // this function accepts the data (lable for the chart + data from the api endpoint)

                const ctx = document.getElementById("canvas").getContext("2d");
                window.myBar = new Chart(ctx, {
                    type: 'boxplot',
                    data: boxplotData, //here it passes the data to the chart
                    options: {
                        responsive: true,
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: true,
                            text: ''
                        }
                    }
                });




            }
        </script>


<script src='js/tablesort.min.js'></script>

<!-- Include sort types you need -->
<script src='js/tablesort.number.min.js'></script>


<script>
  window.onload = function() {
   new Tablesort(document.getElementById('trans1'));

}

</script>


</body>

</html>